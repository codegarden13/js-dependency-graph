{
  "meta": {
    "entry": "app/server.js",
    "urlInfo": {
      "url": "http://localhost:3003",
      "status": 200,
      "contentType": "text/html; charset=UTF-8"
    }
  },
  "nodes": [
    {
      "id": "app/server.js",
      "file": "app/server.js",
      "lines": 100,
      "complexity": 0,
      "headerComment": "NodeAnalyzer HTTP Server\n=======================\n\nResponsibilities\n----------------\n- Serve the browser-based UI (index.html + JS/CSS assets)\n- Expose API routes for:\n    - /analyze   → trigger static analysis\n    - /apps      → list known applications\n    - /readme    → resolve nearest README.md\n- Serve generated analysis output as static JSON\n\nDesign Notes\n------------\n- This server is intentionally \"thin\":\n  no business logic lives here.\n- All filesystem access and analysis logic\n  is delegated to /routes and /lib.\n- Static serving is configured BEFORE API routes\n  to avoid accidental shadowing or 404 fallbacks.",
      "kind": "file"
    },
    {
      "id": "app/config/config.js",
      "file": "app/config/config.js",
      "lines": 28,
      "complexity": 2,
      "headerComment": "Server / Path Configuration\n==========================\n\nCentral place for:\n- PORT\n- PROJECT_ROOT\n- PUBLIC_ROOT\n- OUTPUT_ROOT\n\nKeeps server.js clean and prevents path drift during refactors.",
      "kind": "file"
    },
    {
      "id": "app/config",
      "file": "app/config",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "app/config/apps.json",
      "file": "app/config/apps.json",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "CODE_OF_CONDUCT.md",
      "file": "CODE_OF_CONDUCT.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "LICENSE",
      "file": "LICENSE",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app",
      "file": "app",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "app/lib",
      "file": "app/lib",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "app/public",
      "file": "app/public",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "app/routes",
      "file": "app/routes",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "assets",
      "file": "assets",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "dir"
    },
    {
      "id": "assets/logo.png",
      "file": "assets/logo.png",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "package-lock.json",
      "file": "package-lock.json",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "package.json",
      "file": "package.json",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "readme.md",
      "file": "readme.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app/routes/analyze.js",
      "file": "app/routes/analyze.js",
      "lines": 133,
      "complexity": 30,
      "headerComment": "",
      "kind": "file"
    },
    {
      "id": "app/routes/apps.js",
      "file": "app/routes/apps.js",
      "lines": 23,
      "complexity": 2,
      "headerComment": "endpoint for my apps dropdown",
      "kind": "file"
    },
    {
      "id": "app/routes/help.js",
      "file": "app/routes/help.js",
      "lines": 64,
      "complexity": 7,
      "headerComment": "Help Markdown Route\n===================\n\nPurpose\n-------\nThe frontend has a \"Help\" button that opens a floating panel.\nThis route returns the markdown content for that panel.\n\nContract\n--------\nGET /help\n  -> { found: true, helpPath: string, markdown: string }\n  -> { found: false }\n\nNotes\n-----\n- This route is intentionally NOT the \"nearest README\" logic.\n  That behavior belongs to `GET /readme?file=...`.\n- This route always serves a single, project-owned help file:\n    app/public/readme.md (case-insensitive fallback)",
      "kind": "file"
    },
    {
      "id": "app/routes/readme.js",
      "file": "app/routes/readme.js",
      "lines": 133,
      "complexity": 24,
      "headerComment": "README Lookup Route\n===================\n\nGET /readme?file=<relative-path>\n\nBehavior\n--------\n1) If file points to the global help doc (app/public/readme.md), return it.\n2) Otherwise: find the nearest README in the file's directory and parents.\n\nResponse\n--------\n{ found: true, readmePath: string, markdown: string }\n{ found: false }",
      "kind": "file"
    },
    {
      "id": "app/routes/readme.md",
      "file": "app/routes/readme.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app/routes/README.md",
      "file": "app/routes/README.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app/lib/buildMetricsFromEntrypoint.js",
      "file": "app/lib/buildMetricsFromEntrypoint.js",
      "lines": 656,
      "complexity": 124,
      "headerComment": "buildMetricsFromEntrypoint\n==========================\n\nDeterministic, entrypoint-driven dependency graph builder for Node-style projects.\n\n-----------------------------------------------------------------------------\nARCHITECTURAL ROLE\n-----------------------------------------------------------------------------\nConstructs a static file-level dependency graph starting from a single\nentrypoint file.\n\nPerforms a breadth-first traversal (BFS) across resolvable internal imports\nand emits a D3-compatible metrics payload.\n\n-----------------------------------------------------------------------------\nDESIGN PRINCIPLES\n-----------------------------------------------------------------------------\n• Deterministic traversal (BFS)\n• No runtime execution or evaluation\n• Only local/relative imports are resolved\n• Resilient parsing via parseFile()\n• Side-effect free (pure metrics builder)\n\n-----------------------------------------------------------------------------\nOUTPUT CONTRACT\n-----------------------------------------------------------------------------\n{\n  meta: {\n    entry: string,\n    urlInfo: any\n  },\n  nodes: Array<{\n    id: string,\n    file: string,\n    lines: number,\n    complexity: number,\n    headerComment: string\n  }>,\n  links: Array<{\n    source: string,\n    target: string,\n    type: \"use\" | \"include\"\n  }>\n}"
    },
    {
      "id": "app/lib/README.md",
      "file": "app/lib/README.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app/lib/readme.md",
      "file": "app/lib/readme.md",
      "lines": 0,
      "complexity": 0,
      "headerComment": "",
      "kind": "asset"
    },
    {
      "id": "app/lib/probeAppUrl.js",
      "file": "app/lib/probeAppUrl.js",
      "lines": 16,
      "complexity": 1,
      "headerComment": ""
    },
    {
      "id": "app/lib/parseFile.js",
      "file": "app/lib/parseFile.js",
      "lines": 631,
      "complexity": 219,
      "headerComment": "parseFile\n=========\n\nBest-effort static signal extraction for project files.\n\nWhy this exists\n---------------\nMany apps (especially “single-file” servers) have few or no internal JS imports,\nbut still depend on lots of *files and folders*:\n  - public/ (static frontend)\n  - config.json / .env\n  - CSVs, templates, images, CSS\n\nTo keep the graph meaningful across styles, we parse multiple formats.\n\nSupported formats\n-----------------\n- JS/TS/JSX/TSX: AST-based extraction via @babel/parser + @babel/traverse\n- HTML: extract <script src>, <link href>, <img src>, etc.\n- CSS: extract url(...)\n- JSON: extract path-like values from common keys (path/file/dir/...)\n- MD: extract markdown links/images\n\nOutput Contract (stable)\n------------------------\n{\n  imports: string[],                 // module specifiers (JS only)\n  lines: number,                     // non-empty LOC\n  complexity: number,                // heuristic (JS only)\n  headerComment: string,             // file header comment (JS/TS only)\n  symbols: Array<{name, kind}>,       // top-level declarations (JS only)\n  callsBy: Record<string, string[]>,  // best-effort call attribution (JS only)\n  assetRefs: string[],               // suspicious string refs that look like assets/data/config\n  fileRefsAbs: string[]              // absolute file/folder refs resolved from safe patterns\n}\n\nDeterminism / Safety\n--------------------\n- No runtime execution\n- No evaluation of dynamic expressions\n- Only resolve paths from string literals + known base anchors"
    },
    {
      "id": "app/lib/resolveImports.js",
      "file": "app/lib/resolveImports.js",
      "lines": 19,
      "complexity": 7,
      "headerComment": ""
    }
  ],
  "links": [
    {
      "source": "app/server.js",
      "target": "app/config/config.js",
      "type": "include"
    },
    {
      "source": "app/server.js",
      "target": "app/config/config.js",
      "type": "use"
    },
    {
      "source": "app/server.js",
      "target": "app/routes/analyze.js",
      "type": "use"
    },
    {
      "source": "app/server.js",
      "target": "app/routes/apps.js",
      "type": "use"
    },
    {
      "source": "app/server.js",
      "target": "app/routes/readme.js",
      "type": "use"
    },
    {
      "source": "app/server.js",
      "target": "app/routes/help.js",
      "type": "use"
    },
    {
      "source": "app/config/config.js",
      "target": "app/config",
      "type": "include"
    },
    {
      "source": "app/config",
      "target": "app/config/apps.json",
      "type": "include"
    },
    {
      "source": "app",
      "target": "app/config",
      "type": "include"
    },
    {
      "source": "app",
      "target": "app/lib",
      "type": "include"
    },
    {
      "source": "app",
      "target": "app/public",
      "type": "include"
    },
    {
      "source": "app",
      "target": "app/routes",
      "type": "include"
    },
    {
      "source": "app",
      "target": "app/server.js",
      "type": "include"
    },
    {
      "source": "assets",
      "target": "assets/logo.png",
      "type": "include"
    },
    {
      "source": "readme.md",
      "target": "assets/logo.png",
      "type": "include"
    },
    {
      "source": "app/config",
      "target": "app/config/config.js",
      "type": "include"
    },
    {
      "source": "app/routes/analyze.js",
      "target": "app/routes",
      "type": "include"
    },
    {
      "source": "app/routes",
      "target": "app/routes/analyze.js",
      "type": "include"
    },
    {
      "source": "app/routes",
      "target": "app/routes/apps.js",
      "type": "include"
    },
    {
      "source": "app/routes",
      "target": "app/routes/help.js",
      "type": "include"
    },
    {
      "source": "app/routes",
      "target": "app/routes/readme.js",
      "type": "include"
    },
    {
      "source": "app/routes",
      "target": "app/routes/readme.md",
      "type": "include"
    },
    {
      "source": "app/routes/readme.md",
      "target": "app/routes/README.md",
      "type": "include"
    },
    {
      "source": "app/routes/analyze.js",
      "target": "app/lib/buildMetricsFromEntrypoint.js",
      "type": "use"
    },
    {
      "source": "app/routes/analyze.js",
      "target": "app/lib/probeAppUrl.js",
      "type": "use"
    },
    {
      "source": "app/routes/readme.js",
      "target": "app/routes",
      "type": "include"
    },
    {
      "source": "app/routes/readme.js",
      "target": "app/routes/README.md",
      "type": "include"
    },
    {
      "source": "app/routes/readme.js",
      "target": "app/routes/readme.md",
      "type": "include"
    },
    {
      "source": "app/routes/help.js",
      "target": "app/routes",
      "type": "include"
    },
    {
      "source": "app/lib/buildMetricsFromEntrypoint.js",
      "target": "app/lib/README.md",
      "type": "include"
    },
    {
      "source": "app/lib/buildMetricsFromEntrypoint.js",
      "target": "app/lib/readme.md",
      "type": "include"
    },
    {
      "source": "app/lib/buildMetricsFromEntrypoint.js",
      "target": "app/lib/parseFile.js",
      "type": "use"
    },
    {
      "source": "app/lib/buildMetricsFromEntrypoint.js",
      "target": "app/lib/resolveImports.js",
      "type": "use"
    }
  ]
}